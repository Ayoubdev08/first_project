<!DOCTYPE html> <!-- Déclaration du type de document HTML -->
<html lang="en"> <!-- Balise principale HTML avec attribut lang=en -->
<head> <!-- Début de la section d'en-tête -->
    <meta charset="UTF-8"> <!-- Définition de l'encodage des caractères -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Configuration de la vue pour les appareils mobiles -->
    <title>Calculatrice</title> <!-- Titre de la page -->
    <link rel="stylesheet" href="style.css"> <!-- Liaison vers une feuille de style externe -->
</head> <!-- Fin de la section d'en-tête -->
<body> <!-- Début du corps de la page -->

<div class="calculator"> <!-- Début de la section principale de la calculatrice -->
    <input type="text" id="display" disabled> <!-- Champ de texte pour l'affichage des chiffres, désactivé pour l'entrée -->
    <div class="buttons"> <!-- Début de la section des boutons -->
        <button onclick="appendNumber('1')">1</button> <!-- Bouton '1' avec appel à la fonction appendNumber('1') -->
        <button onclick="appendNumber('2')">2</button> <!-- Bouton '2' avec appel à la fonction appendNumber('2') -->
        <button onclick="appendNumber('3')">3</button> <!-- Bouton '3' avec appel à la fonction appendNumber('3') -->
        <button onclick="appendOperator('+')">+</button> <!-- Bouton '+' avec appel à la fonction appendOperator('+') -->
        <button onclick="appendNumber('4')">4</button> <!-- Bouton '4' avec appel à la fonction appendNumber('4') -->
        <button onclick="appendNumber('5')">5</button> <!-- Bouton '5' avec appel à la fonction appendNumber('5') -->
        <button onclick="appendNumber('6')">6</button> <!-- Bouton '6' avec appel à la fonction appendNumber('6') -->
        <button onclick="appendOperator('-')">-</button> <!-- Bouton '-' avec appel à la fonction appendOperator('-') -->
        <button onclick="appendNumber('7')">7</button> <!-- Bouton '7' avec appel à la fonction appendNumber('7') -->
        <button onclick="appendNumber('8')">8</button> <!-- Bouton '8' avec appel à la fonction appendNumber('8') -->
        <button onclick="appendNumber('9')">9</button> <!-- Bouton '9' avec appel à la fonction appendNumber('9') -->
        <button onclick="appendOperator('*')">*</button> <!-- Bouton '*' avec appel à la fonction appendOperator('*') -->
        <button onclick="appendNumber('0')">0</button> <!-- Bouton '0' avec appel à la fonction appendNumber('0') -->
        <button onclick="calculate()">=</button> <!-- Bouton '=' avec appel à la fonction calculate() -->
        <button onclick="appendNumber('.')">.</button> <!-- Bouton '.' avec appel à la fonction appendNumber('.') -->
        <button onclick="appendOperator(':')">/</button> <!-- Bouton '/' avec appel à la fonction appendOperator(':') -->
        <button onclick="clearDisplay()">C</button> <!-- Bouton 'C' avec appel à la fonction clearDisplay() -->
        <button onclick="backspace()">⌫</button> <!-- Bouton '⌫' (backspace) avec appel à la fonction backspace() -->
    </div> <!-- Fin de la section des boutons -->
</div> <!-- Fin de la section principale de la calculatrice -->

<script> <!-- Début de la section de script JavaScript -->
    let display = document.getElementById('display'); // Récupération de l'élément d'affichage par son ID
    let currentInput = ''; // Variable pour stocker l'entrée utilisateur en cours
    let operator = ''; // Variable pour stocker l'opérateur en cours
    let firstNumber = ''; // Variable pour stocker le premier nombre dans les opérations

    function appendNumber(number) { // Fonction pour ajouter un chiffre à l'entrée actuelle
        currentInput += number;
        display.value = currentInput; // Affichage de l'entrée actuelle dans le champ de texte
    }

    function appendOperator(op) { // Fonction pour ajouter un opérateur
        if (currentInput === '') return; // Vérification si l'entrée est vide
        if (operator !== '') calculate(); // Calcul si un opérateur est déjà en cours
        operator = op; // Attribution de l'opérateur sélectionné
        firstNumber = currentInput; // Sauvegarde du premier nombre pour le calcul ultérieur
        currentInput = ''; // Réinitialisation de l'entrée actuelle pour la prochaine valeur
    }

    function calculate() { // Fonction pour effectuer le calcul
        if (firstNumber === '' || currentInput === '') return; // Vérification des nombres à calculer
        let result;
        const num1 = parseFloat(firstNumber); // Conversion du premier nombre en flottant
        const num2 = parseFloat(currentInput); // Conversion du deuxième nombre en flottant
        switch (operator) { // Sélection de l'opération en fonction de l'opérateur
            case '+':
                result = num1 + num2;
                break;
            case '-':
                result = num1 - num2;
                break;
            case '*':
                result = num1 * num2;
                break;
            case ':':
                result = num1 / num2;
                break;
            default:
                return;
        }
        display.value = result; // Affichage du résultat dans le champ de texte
        currentInput = result.toString(); // Conversion du résultat en chaîne pour les opérations futures
        operator = ''; // Réinitialisation de l'opérateur après le calcul
        firstNumber = ''; // Réinitialisation du premier nombre après le calcul
    }

    function clearDisplay() { // Fonction pour effacer l'affichage et réinitialiser les variables
        currentInput = '';
        operator = '';
        firstNumber = '';
        display.value = '';
    }

    function backspace() { // Fonction pour supprimer le dernier caractère de l'entrée ou l'opérateur en cours
        if (currentInput !== '') {
            currentInput = currentInput.slice(0, -1); // Suppression du dernier caractère de l'entrée actuelle
            display.value = currentInput; // Mise à jour de l'affichage
        } else if (operator !== '') {
            operator = ''; // Réinitialisation de l'opérateur si l'entrée est vide
        } else if (firstNumber !== '') {
            firstNumber = firstNumber.slice(0, -1); // Suppression du dernier caractère du premier nombre
            display.value = firstNumber; // Mise à jour de l'affichage avec le premier nombre
            currentInput = firstNumber; // Mise à jour de l'entrée actuelle avec le premier nombre
        }
    }

    document.addEventListener('keydown', function (event) { // Écouteur d'événement pour les touches du clavier
        const key = event.key; // Récupération de la touche pressée
        if (/\d/.test(key)) { // Vérification si la touche est un chiffre
            appendNumber(key); // Appel à la fonction pour ajouter le chiffre
        } else if (key === '+' || key === '-' || key === '*' || key === ':') { // Vérification des opérateurs
            appendOperator(key); // Appel à la fonction pour ajouter l'opérateur
        } else if (key === '.' || key === ',') { // Vérification du point décimal
            appendNumber('.'); // Appel à la fonction pour ajouter le point décimal
        } else if (key === 'Enter') { // Vérification de la touche Entrée
            calculate(); // Appel à la fonction pour effectuer le calcul
        } else if (key === 'c') { // Vérification de la touche 'c' pour effacer
            clearDisplay(); // Appel à la fonction pour effacer l'affichage
        } else if (key === 'Backspace') { // Vérification de la touche Backspace
            backspace(); // Appel à la fonction pour supprimer le dernier caractère
        }
    });
</script> <!-- Fin de la section de script JavaScript -->

</body> <!-- Fin du corps de la page -->
</html> <!-- Fin du document HTML -->
